<div class="flex">
  <div>
    <h1><%= title %></h1>
  </div>
</div>

<div class="stats">
  <div class="stats-container">
    <label>Server & Player Stats</label>
    <div class="stat-item">
      <span><abbr title="Quick Play">[Q]</abbr> Servers</span>
      <span><%= stats.quickServers %></span>
    </div>
    <div class="stat-item">
      <span>Total Servers</span>
      <span><%= stats.totalServers %></span>
    </div>
    <div class="stat-item">
      <span>Total Bots</span>
      <span><%= stats.totalBots %></span>
    </div>
    <div class="stat-item">
      <span>Total Players (no bots)</span>
      <span><%= stats.totalPlayers %></span>
    </div>
    <div class="stat-item">
      <span>USGN Users (online in-game)</span>
      <span><%= stats.usgnUsers %></span>
    </div>
  </div>
  <div class="stats-container">
    <label>Top Game Modes</label>
    <% stats.gamemodes.forEach(v => { %>
      <div class="stat-item">
        <span><%= ['Standard', 'Deathmatch', 'Team Deathmatch', 'Construction', 'Zombies!'][v.gm] || 'Unknown' %></span>
        <span><%= v.count %></span>
      </div>
    <% }) %>
  </div>
  <div class="stats-container">
    <label>Top Server Regions</label>
    <% stats.locations.forEach(v => { %>
      <div class="stat-item">
        <span><%= v.country %></span>
        <span><%= v.count %></span>
      </div>
    <% }) %>
  </div>
</div>

<div class="stats">
  <div class="stats-container">
    <label>Most Played Maps</label>
    <% stats.maps.forEach(v => { %>
      <div class="stat-item">
        <span><%= v.map %></span>
        <span><%= v.count %></span>
      </div>
    <% }) %>
  </div>
  <div class="stats-container">
    <label>Top Responding Servers</label>
    <% stats.responses.forEach(v => { %>
      <div class="stat-item">
        <span><a href="/details/<%= v.addr %>"><%= v.data.name %></a></span>
        <span><%= v.data.ratio %>%</span>
      </div>
    <% }) %>
  </div>
</div>

<div class="stats">
  <div class="stats-container">
    <label>UDP Service Metrics*</label>
    <div class="stat-item">
      <span>Bytes Sent</span>
      <span><%= stats.sentBytes %></span>
    </div>
    <div class="stat-item">
      <span>Bytes Received</span>
      <span><%= stats.recvBytes %></span>
    </div>
    <div class="stat-item">
      <span>Packets Sent</span>
      <span><%= stats.sentPackets %></span>
    </div>
    <div class="stat-item">
      <span>Packets Received</span>
      <span><%= stats.recvPackets %></span>
    </div>
  </div>
  <div class="stats-container">
    <label>Recently Updated Leaderboards</label>
    <% stats.leaderboards.forEach(v => { %>
      <div class="stat-item">
        <span><a href="/leaderboard/<%= v.addr %>"><%= v.name %></a></span>
        <span><%= timeAgo(v.ts) %></span>
      </div>
    <% }) %>
  </div>
</div>

<small>* Metrics collected since Node.js process started (uptime: <%= stats.uptime %>)</small>
